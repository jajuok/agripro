appId: com.agrischeme.pro
---
# Reusable login subflow
# Clears app state, launches, and ensures we reach the home screen.
# Handles two states:
#   1. Already logged in (Chrome session persists) â†’ home screen loads directly
#   2. Login screen appears â†’ performs login with demo credentials
# Phone field pre-fills "+254" so we must eraseText before input

- launchApp:
    clearState: true

# Wait for either login screen or home screen to load
- extendedWaitUntil:
    visible: "AgriScheme Pro|ðŸ””|Welcome back"
    timeout: 20000

# If login screen is showing, perform login
- runFlow:
    when:
      visible: "+254"
    commands:
      - tapOn: "+254"
      - eraseText: 20
      - inputText: "+254799999999"
      - hideKeyboard
      - tapOn:
          point: 50%, 58%
      - eraseText: 10
      - inputText: "1234"
      - hideKeyboard
      - tapOn: "Login"

# Wait for home screen to load
- extendedWaitUntil:
    visible: "ðŸ””"
    timeout: 20000
